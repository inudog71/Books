<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>è”µæ›¸æ¤œç´¢</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/2.3.1/list.min.js"></script>
  <style>
    body { font-family: sans-serif; margin: 20px; }
    #main { display: none; }
    table { border-collapse: collapse; width: 100%; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
  </style>
</head>
<body>
  <div id="auth">
    <h2>ğŸ”’ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›</h2>
    <input type="password" id="pw" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰">
    <button onclick="check()">OK</button>
  </div>

  <div id="main">
    <h1>ğŸ“š è”µæ›¸æ¤œç´¢</h1>
    <input class="search" placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ãƒ»è‘—è€…ãªã©ï¼‰" />
    <table>
      <thead>
        <tr>
          <th>ã‚¿ã‚¤ãƒˆãƒ«</th><th>è‘—è€…</th><th>å·»å·</th><th>å¤§åˆ†é¡</th><th>å°åˆ†é¡</th><th>ãƒªã‚¹ãƒˆåŒ–æ—¥</th>
        </tr>
      </thead>
      <tbody class="list" id="list-body">
        <!-- JSã§æŒ¿å…¥ã•ã‚Œã¾ã™ -->
      </tbody>
    </table>
  </div>

  <script>
    const PASSWORD = "123"; // ä»»æ„ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è¨­å®š

    function check() {
      const pw = document.getElementById("pw").value;
      if (pw === PASSWORD) {
        document.getElementById("auth").style.display = "none";
        document.getElementById("main").style.display = "block";
        loadCSV(); // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æ­£è§£å¾Œã«èª­ã¿è¾¼ã¿é–‹å§‹
      } else {
        alert("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™");
      }
    }

    function loadCSV() {
      fetch("display_list.csv")  // è¡¨ç¤ºç”¨CSVãƒ•ã‚¡ã‚¤ãƒ«åï¼ˆãƒªãƒã‚¸ãƒˆãƒªå†…ã«ç½®ãï¼‰
        .then(res => res.text())
        .then(csv => {
          const lines = csv.trim().split("\n").slice(1); // 1è¡Œç›®ã¯ãƒ˜ãƒƒãƒ€ãƒ¼
          const tbody = document.getElementById("list-body");
          lines.forEach(line => {
            const [title, author, volume, category, kana, date] = line.split(",");
            const row = document.createElement("tr");
            row.innerHTML = `<td class="title">${title}</td>
                             <td class="author">${author}</td>
                             <td>${volume}</td>
                             <td>${category}</td>
                             <td>${kana}</td>
                             <td>${date}</td>`;
            tbody.appendChild(row);
          });
          new List('main', { valueNames: ['title', 'author'] });
        });
    }
  </script>
</body>
</html>
